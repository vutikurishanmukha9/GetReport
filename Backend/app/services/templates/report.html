<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GetReport â€” {{ filename }}</title>
    <link rel="stylesheet" href="report.css">
    <style>
        /* Inline critical @import for Google Fonts (WeasyPrint supports it) */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
    </style>
</head>
<body>

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# TITLE PAGE                                                                 #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
<div class="title-page">
    <div class="title-page__brand">â¬¢ GETREPORT</div>
    <h1 class="title-page__name">Data Intelligence<br>Report</h1>
    <p class="title-page__subtitle">{{ filename }}</p>
    <div class="title-page__divider"></div>
    <p class="title-page__meta">
        Generated on <strong>{{ generated_at }}</strong><br>
        {{ metadata.total_rows | default(0) }} rows Â· {{ metadata.total_columns | default(0) }} columns Â·
        {{ metadata.numeric_columns | default(0) }} numeric Â· {{ metadata.categorical_columns | default(0) }} categorical
    </p>
</div>

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# EXECUTIVE SUMMARY                                                          #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('confidence_scores') %}
<div class="section page-break">
    <div class="section-header section-header--green">ğŸ“Š Executive Summary</div>
    <div class="section-body">
        {% set cs = analysis.confidence_scores %}
        <div class="stats-row">
            <div class="stat-card">
                <div class="stat-card__value">{{ metadata.total_rows | default(0) | int }}</div>
                <div class="stat-card__label">Total Rows</div>
            </div>
            <div class="stat-card">
                <div class="stat-card__value">{{ metadata.total_columns | default(0) | int }}</div>
                <div class="stat-card__label">Columns</div>
            </div>
            <div class="stat-card">
                <div class="stat-card__value">{{ metadata.get('analytical_numeric_columns', 0) | int }}</div>
                <div class="stat-card__label">Analytical</div>
            </div>
            {% if cs.get('dataset_grade') %}
            <div class="stat-card">
                <div class="stat-card__value">
                    <span class="grade-circle grade-{{ cs.dataset_grade | lower }}">{{ cs.dataset_grade }}</span>
                </div>
                <div class="stat-card__label">Data Quality</div>
            </div>
            {% endif %}
        </div>

        {% if cs.get('high_confidence_count') is defined %}
        <p class="text-small text-muted mt-8">
            <strong>{{ cs.high_confidence_count }}</strong> high-confidence columns Â·
            <strong>{{ cs.low_confidence_count }}</strong> low-confidence columns
        </p>
        {% endif %}
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# DATASET OVERVIEW                                                           #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
<div class="section">
    <div class="section-header">ğŸ“‹ Dataset Overview</div>
    <div class="section-body">
        <table>
            <thead>
                <tr><th>Property</th><th>Value</th></tr>
            </thead>
            <tbody>
                <tr><td>Total Rows</td><td>{{ metadata.total_rows | default('â€”') }}</td></tr>
                <tr><td>Total Columns</td><td>{{ metadata.total_columns | default('â€”') }}</td></tr>
                <tr><td>Numeric Columns</td><td>{{ metadata.numeric_columns | default('â€”') }}</td></tr>
                <tr><td>Categorical Columns</td><td>{{ metadata.categorical_columns | default('â€”') }}</td></tr>
                <tr><td>Analytical Numeric</td><td>{{ metadata.get('analytical_numeric_columns', 'â€”') }}</td></tr>
                {% if metadata.get('excluded_columns') %}
                <tr><td>Excluded Columns</td><td>{{ metadata.excluded_columns | join(', ') }}</td></tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# CONFIDENCE SCORES                                                          #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('confidence_scores') and analysis.confidence_scores.get('columns') %}
<div class="section">
    <div class="section-header section-header--teal">ğŸ¯ Column Confidence Scores</div>
    <div class="section-body">
        <table>
            <thead>
                <tr><th>Column</th><th>Score</th><th>Grade</th><th>Factors</th></tr>
            </thead>
            <tbody>
                {% for col_name, col_data in analysis.confidence_scores.columns.items() %}
                <tr>
                    <td class="text-bold">{{ col_name }}</td>
                    <td>{{ "%.0f" | format(col_data.score * 100 if col_data.score is defined else 0) }}%</td>
                    <td><span class="badge badge--{{ (col_data.grade | default('c')) | lower }}">{{ col_data.grade | default('â€”') }}</span></td>
                    <td class="text-small text-muted">{{ col_data.get('factors', []) | join(', ') or 'â€”' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# SEMANTIC ANALYSIS                                                          #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('semantic_analysis') %}
<div class="section">
    <div class="section-header section-header--blue">ğŸ”¬ Semantic Intelligence</div>
    <div class="section-body">
        {% set sem = analysis.semantic_analysis %}
        {% if sem.get('domain') %}
        <div class="insight-card insight-card--success">
            <div class="insight-card__title">Detected Domain: {{ sem.domain.get('primary', 'Unknown') }}</div>
            <div class="insight-card__text">Confidence: {{ "%.0f" | format((sem.domain.get('confidence', 0)) * 100) }}%</div>
        </div>
        {% endif %}

        {% if sem.get('column_roles') %}
        <table class="mt-8">
            <thead>
                <tr><th>Column</th><th>Role</th><th>Semantic Type</th></tr>
            </thead>
            <tbody>
                {% for col_name, role_data in sem.column_roles.items() %}
                <tr>
                    <td class="text-bold">{{ col_name }}</td>
                    <td><span class="badge badge--info">{{ role_data.get('role', 'â€”') }}</span></td>
                    <td class="text-muted">{{ role_data.get('semantic_type', 'â€”') }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}

        {% if sem.get('suggested_pairs') and sem.suggested_pairs | length > 0 %}
        <p class="text-bold mt-12">Suggested Analysis Pairs:</p>
        <ul class="text-small">
            {% for pair in sem.suggested_pairs %}
            <li>{{ pair.get('col_a', '') }} â†” {{ pair.get('col_b', '') }}: {{ pair.get('reason', '') }}</li>
            {% endfor %}
        </ul>
        {% endif %}
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# ANALYSIS DECISIONS                                                         #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('analysis_decisions') %}
<div class="section">
    <div class="section-header section-header--slate">ğŸ§  Analysis Decisions</div>
    <div class="section-body">
        {% set dec = analysis.analysis_decisions %}
        {% if dec.get('summary') %}
        <p class="mb-8"><strong>{{ dec.summary.get('ran', 0) }}</strong> analyses ran Â· <strong>{{ dec.summary.get('skipped', 0) }}</strong> skipped</p>
        {% endif %}
        {% if dec.get('decisions') %}
        <table>
            <thead>
                <tr><th>Analysis</th><th>Status</th><th>Reason</th></tr>
            </thead>
            <tbody>
                {% for d in dec.decisions %}
                <tr>
                    <td class="text-bold">{{ d.get('name', 'â€”') }}</td>
                    <td>
                        {% if d.get('ran', false) %}
                        <span class="badge badge--positive">Ran</span>
                        {% else %}
                        <span class="badge badge--neutral">Skipped</span>
                        {% endif %}
                    </td>
                    <td class="text-small text-muted">{{ d.get('reason', 'â€”') }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# CLEANING SUMMARY                                                           #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('cleaning_report') %}
<div class="section">
    <div class="section-header section-header--green">ğŸ§¹ Data Cleaning Summary</div>
    <div class="section-body">
        {% set cr = analysis.cleaning_report %}
        {% if cr.get('steps_applied') %}
        <table>
            <thead>
                <tr><th>Step</th><th>Action</th><th>Impact</th></tr>
            </thead>
            <tbody>
                {% for step in cr.steps_applied %}
                <tr>
                    <td class="text-bold">{{ step.get('name', 'â€”') }}</td>
                    <td>{{ step.get('action', 'â€”') }}</td>
                    <td>{{ step.get('impact', 'â€”') }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# BEFORE VS AFTER COMPARISON                                                 #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('cleaning_report') and analysis.cleaning_report.get('before_after') %}
<div class="section">
    <div class="section-header section-header--blue">ğŸ“ˆ Data Quality Improvement</div>
    <div class="section-body">
        {% set ba = analysis.cleaning_report.before_after %}
        <table>
            <thead>
                <tr><th>Metric</th><th>Before</th><th>After</th><th>Change</th></tr>
            </thead>
            <tbody>
                {% for metric in ba %}
                <tr>
                    <td class="text-bold">{{ metric.get('metric', 'â€”') }}</td>
                    <td>{{ metric.get('before', 'â€”') }}</td>
                    <td>{{ metric.get('after', 'â€”') }}</td>
                    <td>
                        {% set delta = metric.get('delta', 0) %}
                        {% if delta > 0 %}
                        <span class="priority-low">â–² {{ delta }}</span>
                        {% elif delta < 0 %}
                        <span class="priority-high">â–¼ {{ delta }}</span>
                        {% else %}
                        <span class="text-muted">â€”</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# SUMMARY STATISTICS                                                         #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('summary') %}
<div class="section page-break">
    <div class="section-header">ğŸ“ Summary Statistics</div>
    <div class="section-body">
        <table>
            <thead>
                <tr><th>Column</th><th>Mean</th><th>Median</th><th>Std Dev</th><th>Min</th><th>Max</th><th>Null %</th></tr>
            </thead>
            <tbody>
                {% for col_name, stats in analysis.summary.items() %}
                <tr>
                    <td class="text-bold">{{ col_name }}</td>
                    <td>{{ "%.2f" | format(stats.mean) if stats.mean is defined else 'â€”' }}</td>
                    <td>{{ "%.2f" | format(stats.median) if stats.median is defined else 'â€”' }}</td>
                    <td>{{ "%.2f" | format(stats.std) if stats.std is defined else 'â€”' }}</td>
                    <td>{{ "%.2f" | format(stats.min) if stats.min is defined else 'â€”' }}</td>
                    <td>{{ "%.2f" | format(stats.max) if stats.max is defined else 'â€”' }}</td>
                    <td>{{ "%.1f" | format(stats.missing_pct) if stats.missing_pct is defined else '0.0' }}%</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# ADVANCED STATISTICS                                                        #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('summary') %}
{% set skewed = [] %}
{% for col, stats in analysis.summary.items() %}
    {% if stats.get('skewness') is defined and (stats.skewness > 1.0 or stats.skewness < -1.0) %}
        {% set _ = skewed.append({'col': col, 'skewness': stats.skewness, 'kurtosis': stats.get('kurtosis', 0)}) %}
    {% endif %}
{% endfor %}
{% if skewed | length > 0 %}
<div class="section">
    <div class="section-header section-header--amber">ğŸ“‰ Non-Normal Distributions</div>
    <div class="section-body">
        <p class="text-small text-muted mb-8">Columns with |skewness| > 1.0 â€” may benefit from transformation.</p>
        <table>
            <thead>
                <tr><th>Column</th><th>Skewness</th><th>Kurtosis</th><th>Direction</th></tr>
            </thead>
            <tbody>
                {% for item in skewed %}
                <tr>
                    <td class="text-bold">{{ item.col }}</td>
                    <td>{{ "%.3f" | format(item.skewness) }}</td>
                    <td>{{ "%.3f" | format(item.kurtosis) }}</td>
                    <td>
                        {% if item.skewness > 0 %}
                        <span class="badge badge--info">Right-skewed</span>
                        {% else %}
                        <span class="badge badge--neutral">Left-skewed</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# STRONG CORRELATIONS                                                        #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('strong_correlations') and analysis.strong_correlations | length > 0 %}
<div class="section">
    <div class="section-header section-header--blue">ğŸ”— Strong Correlations</div>
    <div class="section-body">
        <table>
            <thead>
                <tr><th>Column A</th><th>Column B</th><th>Correlation</th><th>Type</th></tr>
            </thead>
            <tbody>
                {% for pair in analysis.strong_correlations %}
                <tr>
                    <td class="text-bold">{{ pair.get('col_a', pair[0] if pair is sequence else 'â€”') }}</td>
                    <td class="text-bold">{{ pair.get('col_b', pair[1] if pair is sequence else 'â€”') }}</td>
                    <td>{{ "%.3f" | format(pair.get('value', pair[2] if pair is sequence else 0)) }}</td>
                    <td>
                        {% set val = pair.get('value', pair[2] if pair is sequence else 0) %}
                        {% if val > 0 %}
                        <span class="badge badge--positive">Positive</span>
                        {% else %}
                        <span class="badge badge--negative">Negative</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# MULTICOLLINEARITY                                                          #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('strong_correlations') and analysis.strong_correlations | length > 0 %}
{% set mc_pairs = [] %}
{% for pair in analysis.strong_correlations %}
    {% set val = pair.get('value', pair[2] if pair is sequence else 0) | abs %}
    {% if val > 0.85 %}
        {% set _ = mc_pairs.append(pair) %}
    {% endif %}
{% endfor %}
{% if mc_pairs | length > 0 %}
<div class="section">
    <div class="section-header section-header--red">âš ï¸ Multicollinearity Warning</div>
    <div class="section-body">
        <div class="insight-card insight-card--warning">
            <div class="insight-card__title">Highly Correlated Feature Pairs (|r| > 0.85)</div>
            <div class="insight-card__text">Consider removing one from each pair to avoid multicollinearity in models.</div>
        </div>
        <table class="mt-8">
            <thead>
                <tr><th>Column A</th><th>Column B</th><th>|Correlation|</th></tr>
            </thead>
            <tbody>
                {% for pair in mc_pairs %}
                <tr>
                    <td>{{ pair.get('col_a', pair[0] if pair is sequence else 'â€”') }}</td>
                    <td>{{ pair.get('col_b', pair[1] if pair is sequence else 'â€”') }}</td>
                    <td class="priority-high">{{ "%.3f" | format((pair.get('value', pair[2] if pair is sequence else 0)) | abs) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# TIME SERIES                                                                #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('time_series_analysis') and analysis.time_series_analysis | length > 0 %}
<div class="section">
    <div class="section-header section-header--teal">ğŸ“… Time Series Analysis</div>
    <div class="section-body">
        {% for col_name, ts in analysis.time_series_analysis.items() %}
        <div class="insight-card no-break mb-8">
            <div class="insight-card__title">{{ col_name }}</div>
            <div class="insight-card__text">
                {% if ts.get('trend') %}Trend: <strong>{{ ts.trend.get('direction', 'â€”') }}</strong> (slope: {{ "%.4f" | format(ts.trend.get('slope', 0)) }}){% endif %}
                {% if ts.get('seasonality') %} Â· Seasonality: <strong>{{ ts.seasonality.get('detected', false) }}</strong>{% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# AI INSIGHTS                                                                #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('insights') %}
<div class="section page-break">
    <div class="section-header section-header--green">ğŸ¤– AI-Powered Insights</div>
    <div class="section-body">
        {% set ins = analysis.insights %}
        {% if ins is string %}
        <div class="insight-card">
            <div class="insight-card__text">{{ ins }}</div>
        </div>
        {% elif ins is mapping %}
            {% for key, value in ins.items() %}
            <div class="insight-card mb-8">
                <div class="insight-card__title">{{ key | replace('_', ' ') | title }}</div>
                <div class="insight-card__text">{{ value if value is string else value | tojson }}</div>
            </div>
            {% endfor %}
        {% endif %}
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# OUTLIERS                                                                   #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('outliers') and analysis.outliers | length > 0 %}
<div class="section">
    <div class="section-header section-header--amber">ğŸ” Outlier Detection</div>
    <div class="section-body">
        <table>
            <thead>
                <tr><th>Column</th><th>Count</th><th>% of Data</th><th>Lower Bound</th><th>Upper Bound</th></tr>
            </thead>
            <tbody>
                {% for col_name, info in analysis.outliers.items() %}
                <tr>
                    <td class="text-bold">{{ col_name }}</td>
                    <td>{{ info.get('count', 0) }}</td>
                    <td>{{ "%.1f" | format(info.get('percentage', 0)) }}%</td>
                    <td>{{ "%.2f" | format(info.get('lower_bound', 0)) }}</td>
                    <td>{{ "%.2f" | format(info.get('upper_bound', 0)) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# CATEGORICAL DISTRIBUTION                                                   #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('categorical_distribution') and analysis.categorical_distribution | length > 0 %}
<div class="section">
    <div class="section-header">ğŸ“Š Categorical Distribution</div>
    <div class="section-body">
        {% for col_name, dist in analysis.categorical_distribution.items() %}
        <div class="no-break mb-8">
            <p class="text-bold">{{ col_name }} <span class="text-muted text-small">({{ dist.get('total_unique', '?') }} unique Â· {{ dist.get('missing_pct', 0) }}% missing)</span></p>
            <table>
                <thead>
                    <tr><th>Value</th><th>Count</th><th>%</th></tr>
                </thead>
                <tbody>
                    {% for cat_name, cat_data in dist.get('categories', {}).items() %}
                    <tr>
                        <td>{{ cat_name }}</td>
                        <td>{{ cat_data.get('count', 0) }}</td>
                        <td>{{ cat_data.get('percentage', 0) }}%</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# MISSING PATTERNS                                                           #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('missing_patterns') and analysis.missing_patterns.get('columns') %}
<div class="section">
    <div class="section-header section-header--amber">ğŸ•³ï¸ Missing Value Patterns</div>
    <div class="section-body">
        <table>
            <thead>
                <tr><th>Column</th><th>Missing Count</th><th>Missing %</th><th>Pattern</th></tr>
            </thead>
            <tbody>
                {% for col_name, mp in analysis.missing_patterns.columns.items() %}
                {% if mp.get('missing_pct', 0) > 0 %}
                <tr>
                    <td class="text-bold">{{ col_name }}</td>
                    <td>{{ mp.get('missing_count', 0) }}</td>
                    <td>{{ "%.1f" | format(mp.get('missing_pct', 0)) }}%</td>
                    <td><span class="badge badge--neutral">{{ mp.get('pattern', 'random') }}</span></td>
                </tr>
                {% endif %}
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# FEATURE ENGINEERING                                                        #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('feature_engineering') %}
<div class="section page-break">
    <div class="section-header section-header--teal">ğŸ› ï¸ Feature Engineering Recommendations</div>
    <div class="section-body">
        {% set fe = analysis.feature_engineering %}
        {% if fe.get('encoding_recommendations') and fe.encoding_recommendations | length > 0 %}
        <p class="text-bold mb-8">Encoding Recommendations</p>
        <table>
            <thead>
                <tr><th>Column</th><th>Current Type</th><th>Suggested Encoding</th><th>Reason</th></tr>
            </thead>
            <tbody>
                {% for rec in fe.encoding_recommendations %}
                <tr>
                    <td class="text-bold">{{ rec.get('column', 'â€”') }}</td>
                    <td>{{ rec.get('current_type', 'â€”') }}</td>
                    <td><span class="badge badge--info">{{ rec.get('encoding', 'â€”') }}</span></td>
                    <td class="text-small text-muted">{{ rec.get('reason', 'â€”') }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}

        {% if fe.get('scaling_recommendations') and fe.scaling_recommendations | length > 0 %}
        <p class="text-bold mt-12 mb-8">Scaling Recommendations</p>
        <table>
            <thead>
                <tr><th>Column</th><th>Suggested Scaler</th><th>Reason</th></tr>
            </thead>
            <tbody>
                {% for rec in fe.scaling_recommendations %}
                <tr>
                    <td class="text-bold">{{ rec.get('column', 'â€”') }}</td>
                    <td><span class="badge badge--info">{{ rec.get('scaler', 'â€”') }}</span></td>
                    <td class="text-small text-muted">{{ rec.get('reason', 'â€”') }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# SMART SCHEMA                                                               #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('smart_schema') %}
<div class="section">
    <div class="section-header section-header--slate">ğŸ—‚ï¸ Smart Schema Analysis</div>
    <div class="section-body">
        {% set ss = analysis.smart_schema %}
        {% if ss.get('type_corrections') and ss.type_corrections | length > 0 %}
        <p class="text-bold mb-8">Type Corrections Detected</p>
        <table>
            <thead>
                <tr><th>Column</th><th>Current Type</th><th>Suggested Type</th><th>Confidence</th></tr>
            </thead>
            <tbody>
                {% for tc in ss.type_corrections %}
                <tr>
                    <td class="text-bold">{{ tc.get('column', 'â€”') }}</td>
                    <td>{{ tc.get('current', 'â€”') }}</td>
                    <td><span class="badge badge--info">{{ tc.get('suggested', 'â€”') }}</span></td>
                    <td>{{ "%.0f" | format((tc.get('confidence', 0)) * 100) }}%</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}

        {% if ss.get('relationships') and ss.relationships | length > 0 %}
        <p class="text-bold mt-12 mb-8">Detected Relationships</p>
        <table>
            <thead>
                <tr><th>Type</th><th>From</th><th>To</th><th>Confidence</th></tr>
            </thead>
            <tbody>
                {% for rel in ss.relationships %}
                <tr>
                    <td><span class="badge badge--info">{{ rel.get('type', 'â€”') }}</span></td>
                    <td>{{ rel.get('from', 'â€”') }}</td>
                    <td>{{ rel.get('to', 'â€”') }}</td>
                    <td>{{ "%.0f" | format((rel.get('confidence', 0)) * 100) }}%</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# RECOMMENDATIONS                                                            #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('recommendations') and analysis.recommendations.get('items') %}
<div class="section page-break">
    <div class="section-header section-header--green">ğŸ’¡ Recommendations</div>
    <div class="section-body">
        {% for rec in analysis.recommendations.items %}
        <div class="recommendation no-break">
            <div class="recommendation__header">
                <span class="recommendation__title">{{ rec.get('title', 'â€”') }}</span>
                <span class="badge badge--{{ (rec.get('priority', 'medium')) | lower }}">{{ rec.get('priority', 'Medium') }}</span>
            </div>
            <div class="recommendation__detail">{{ rec.get('detail', 'â€”') }}</div>
            {% if rec.get('action') %}
            <p class="text-small mt-8"><strong>Action:</strong> {{ rec.action }}</p>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# RANKED INSIGHTS                                                            #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if analysis.get('ranked_insights') and analysis.ranked_insights | length > 0 %}
<div class="section">
    <div class="section-header section-header--blue">ğŸ† Ranked Insights</div>
    <div class="section-body">
        {% for ins in analysis.ranked_insights[:10] %}
        <div class="insight-card no-break mb-8 {% if ins.get('severity') == 'high' %}insight-card--danger{% elif ins.get('severity') == 'medium' %}insight-card--warning{% else %}insight-card--success{% endif %}">
            <div class="insight-card__title">
                {{ ins.get('title', ins.get('insight', 'â€”')) }}
                <span class="badge badge--{{ (ins.get('severity', 'low')) | lower }} " style="margin-left:8px;">{{ ins.get('severity', ins.get('priority', 'info')) }}</span>
            </div>
            <div class="insight-card__text">
                {{ ins.get('description', ins.get('detail', '')) }}
                {% if ins.get('score') %}<span class="text-muted"> (score: {{ "%.2f" | format(ins.score) }})</span>{% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# VISUALIZATIONS                                                             #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{% if charts and charts | length > 0 %}
<div class="section page-break">
    <div class="section-header">ğŸ“ˆ Visualizations</div>
    <div class="section-body">
        <div class="chart-grid">
            {% for chart_name, chart_b64 in charts.items() %}
            {% if chart_b64 %}
            <div class="chart-card">
                <img src="data:image/png;base64,{{ chart_b64 }}" alt="{{ chart_name }}">
                <div class="chart-card__caption">{{ chart_name | replace('_', ' ') | title }}</div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
{# FOOTER                                                                     #}
{# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
<div class="section" style="margin-top: 40px;">
    <hr class="divider">
    <p class="text-small text-muted" style="text-align: center;">
        Report generated by <strong>GetReport</strong> â€” Automated Data Intelligence Platform<br>
        {{ generated_at }}
    </p>
</div>

</body>
</html>
